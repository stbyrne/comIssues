<ion-view>
    <ion-nav-buttons class="bar-energized">
        <div class="buttons">
            <button class="button button-icon button-clear ion-drag" menu-toggle="left">
            </button>
        </div>
        <h1 class="title">ThinkCentral</h1>
        <div class="buttons">
            <a href="#/app/main" class="button icon button-icon">Home</a>
        </div>
    </ion-nav-buttons>
    <ion-content>

        <ion-list>
            <div class="item item-hmhvibrant item-input issue-search">
                <i class="icon ion-search placeholder-icon"></i>
                <input type="search" placeholder="Search Issues" ng-model="searchIssues">
                <button ng-if="searchIssues.length" class="icon button-icon ion-ios-close-outline" ng-click="$parent.searchIssues=''">
                </button>
            </div>
            
            <!--Pay attention to the arguement in ng-repeat where if the issue description is the same as the previus then it is still under the same item divider-->
            <div ng-repeat="issues in thinkcentral | filter:searchIssues" ng-init="num=$index">

                <ion-item ng-if="thinkcentral[num].issue!=thinkcentral[num-1].issue" class="item-divider item-hmhlight icon item-icon-left">
                    <i class="icon ion-ios-pie-outline"></i>{{issues.issue}}
                </ion-item>
                <ion-item href="#/app/issues/{{issue.issue}}" ng-click="setItem(issues)" class="item item-icon-left item-icon-right">
                    <i class="icon ion-ios-cog-outline"></i>
                    <h2>{{issues.process}}</h2>
                    <p>{{issues.cause}}</p>
                    <i class="icon ion-ios-arrow-thin-right"></i>
                </ion-item>

            </div>
        </ion-list>
    </ion-content>
</ion-view>
